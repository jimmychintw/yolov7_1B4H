# YOLOv7 MultiHead Configuration
# Based on data/coco.yaml
# Strategy A: Shared box/obj regression, separate classification heads

# ========== Standard COCO Configuration (Unchanged) ==========
# download command/URL (optional)
download: bash ./scripts/get_coco.sh

# train and val data as 1) directory: path/images/, 2) file: path/images.txt, or 3) list: [path1/images/, path2/images/]
train: ./coco/train2017.txt  # 118287 images
val: ./coco/val2017.txt  # 5000 images
test: ./coco/test-dev2017.txt  # 20288 of 40670 images

# Classes
nc: 80  # number of classes
names: ['person', 'bicycle', 'car', 'motorcycle', 'airplane', 'bus', 'train', 'truck', 'boat', 'traffic light',
        'fire hydrant', 'stop sign', 'parking meter', 'bench', 'bird', 'cat', 'dog', 'horse', 'sheep', 'cow',
        'elephant', 'bear', 'zebra', 'giraffe', 'backpack', 'umbrella', 'handbag', 'tie', 'suitcase', 'frisbee',
        'skis', 'snowboard', 'sports ball', 'kite', 'baseball bat', 'baseball glove', 'skateboard', 'surfboard',
        'tennis racket', 'bottle', 'wine glass', 'cup', 'fork', 'knife', 'spoon', 'bowl', 'banana', 'apple',
        'sandwich', 'orange', 'broccoli', 'carrot', 'hot dog', 'pizza', 'donut', 'cake', 'chair', 'couch',
        'potted plant', 'bed', 'dining table', 'toilet', 'tv', 'laptop', 'mouse', 'remote', 'keyboard', 'cell phone',
        'microwave', 'oven', 'toaster', 'sink', 'refrigerator', 'book', 'clock', 'vase', 'scissors', 'teddy bear',
        'hair drier', 'toothbrush']

# ========== MultiHead Extension Configuration ==========
multihead:
  enabled: true
  n_heads: 4
  strategy: 'strategy_a'  # Global localization, specialized classification
  shared_reg_obj: true    # Share box and objectness regression
  
  # Head assignments (no duplicates, semantically grouped)
  head_assignments:
    0:  # Head 0: Person & Sports Equipment (20 classes)
      classes: [0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,76]
      weight: 1.0
      name: 'person_sports'
      description: 'Person and sports/personal items'
      
    1:  # Head 1: Vehicles & Outdoor Infrastructure (20 classes)
      classes: [1,2,3,4,5,6,7,8,9,10,11,12,13,24,25,72,73,74,75,77]
      weight: 1.0
      name: 'vehicles_outdoor'
      description: 'Transportation and outdoor facilities'
      
    2:  # Head 2: Animals & Food (20 classes)
      classes: [14,15,16,17,18,19,20,21,22,23,44,45,46,47,48,49,50,51,52,53]
      weight: 1.0
      name: 'animals_food'
      description: 'Animals and food items'
      
    3:  # Head 3: Furniture & Electronics (20 classes)
      classes: [54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,78,79]
      weight: 1.0
      name: 'furniture_electronics'
      description: 'Indoor furniture and electronic devices'
  
  # Weight normalization
  normalize_weights: true
  
  # Training parameters
  training:
    balance_loss: true
    min_samples_per_head: 4
    gradient_clip: 10.0